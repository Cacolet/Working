<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        // 1. 作用域
        // JavaScript 作用域 : 就是代码名字(变量) 在某个范围内起作用和效果
        // 目的是为了提高程序的可靠性，更重要的是减少命名冲突


        // 2. js的作用域(es6)之前 : 全局作用域、局部作用域

        // 2.1 全局作用域 : 整个script标签 或者是 一个单独的js文件
        // 2.2 局部作用域 : 在函数内部就是局部作用域 (只在函数内部起效果和作用)


        // 3. 变量的作用域 
        // 根据作用域的不同，变量分为 全局变量 和 局部变量

        // 3.1 全局变量 : 在全局作用域下的变量
            // 注意：如果在函数内部，没有声明直接赋值的变量也属于全局变量
        var num = 10;  // num 是一个全局变量
        function fun1(){
            console.log(num); // 全局变量在全局下都可以使用
        }
        fun1();

        // 3.2 局部变量
            // 注意：函数的形参也可以看作局部变量
        function fun2(){
            var num1 = 20;
            num2;
        }
        console.log(num1);  //报错    因为num1是局部变量
        console.log(num2);  //不报错  因为num2未声明直接赋值 是全局变量

        // 3.3 从执行效率来看全局变量和局部变量
            // (1) 全局变量只有在浏览器关闭时才会销毁，比较占内存资源
            // (2) 局部变量 当程序执行完毕就会销毁，比较节约内存资源

        // 注意：JS没有块级作用域 只有全局作用域和局部作用域
        // js 是在es6时新增的块级作用域
        // 块级作用域 {}  比如 if{}  for{} 等


        // 4. 作用域链
            // (1) 只要是代码，就至少有一个作用域
            // (2) 写在函数内部的局部作用域
            // (3) 如果函数中还有函数，那么在这个作用域中就又可以诞生一个作用域
            // (4) 内部函数访问外部函数的变量，采取的是链式查找的方式来决定取哪个值，这种结构我们称作 作用域链
            // (5) 就近原则
        var num = 10;
        function fun3(){  //外部函数
            var num = 20;
            
            function fun4(){  //内部函数
                console.log(num);
            }
            fun4();
        }
        fun3();   // 输出 20
    </script>
</head>
<body>
    
</body>
</html>